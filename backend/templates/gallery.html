{% extends 'base.html' %}

{% block title %}
Gallery
{% endblock %}

{% block content %}
<h2 class="gallery-title">Галерея</h2>
<div class="slider-container-wrapper">
    <button class="prev" onclick="prevSlide()">&#10094;</button>
    <div class="slider">
        <div class="slider-container" id="slider-container">
            {% for image in images %}
            <div class="slider-item">
                <img src="/{{ image }}">
            </div>
            {% endfor %}
        </div>
    </div>
    <button class="next" onclick="nextSlide()">&#10095;</button>
</div>
<div class="dots-container">
    {% for image in images %}
    <span class="dot" onclick="currentSlide({{ forloop.counter0 }})"></span>
    {% endfor %}
</div>

<script >
let slideIndex = 0;

function showSlides(index) {
    const slides = document.getElementsByClassName('slider-item');
    const dots = document.getElementsByClassName('dot');

    if (index >= slides.length) {
        slideIndex = 0;
    } else if (index < 0) {
        slideIndex = slides.length - 1;
    }

    for (let i = 0; i < slides.length; i++) {
        slides[i].style.display = 'none';
    }

    for (let i = 0; i < dots.length; i++) {
        dots[i].className = dots[i].className.replace(' active', '');
    }

    for (let i = slideIndex; i < slideIndex + 4; i++) {
        if (i < slides.length) {
            slides[i].style.display = 'flex';
        }
        dots[i % dots.length].className += ' active';
    }
}

function nextSlide() {
    slideIndex++;
    showSlides(slideIndex);
}

function prevSlide() {
    slideIndex--;
    showSlides(slideIndex);
}

function currentSlide(index) {
    slideIndex = index;
    showSlides(slideIndex);
}

document.addEventListener('DOMContentLoaded', () => {
    showSlides(slideIndex);
});

</script>
{% endblock %}
